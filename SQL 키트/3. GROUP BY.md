# 3. GROUP BY

### ë¬¸ì œ 1) ê³ ì–‘ì´ì™€ ê°œëŠ” ëª‡ë§ˆë¦¬ ìžˆì„ê¹Œ

```MYSQL
SELECT ANIMAL_TYPE, COUNT(*) AS "count"
FROM ANIMAL_INS
GROUP BY ANIMAL_TYPE
ORDER BY ANIMAL_TYPE;
```



### ë¬¸ì œ 2) ë™ëª… ë™ë¬¼ ìˆ˜ ì°¾ê¸°

```MYSQL
SELECT NAME, COUNT(*) AS "COUNT"
FROM ANIMAL_INS
GROUP BY NAME
HAVING COUNT(NAME) >= 2
ORDER BY NAME;
```

GROUP BY ì— ëŒ€í•œ ê³„ì‚°ì„ ì‹œí–‰í•  ë•Œì—ëŠ” HAVINGì„ ì‚¬ìš©í•œë‹¤.



### ë¬¸ì œ 3) ìž…ì–‘ ì‹œê° êµ¬í•˜ê¸° (1)

```MYSQL
SELECT HOUR(DATETIME) AS "HOUR", COUNT(*) AS "COUNT"
FROM ANIMAL_OUTS
GROUP BY HOUR(DATETIME)
HAVING HOUR >= 9 AND HOUR < 20
ORDER BY HOUR;
```

DATETIME ì¤‘ HOURë§Œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” HOUR(DATETIME)ì´ë¼ í‘œì‹œí•œë‹¤. ì´ì™€ ìœ ì‚¬í•˜ê²Œ MONTH(DATETIME), YEAR(DATETIME), MINUTE(DATETIME) ë“±ì´ ìžˆë‹¤. (YEAR, MONTH, DAY, HOUR, MINUTE, SECOND, MICROSECOND)

GROUP BY í›„ HAVING ì ˆì—ì„œëŠ” HOURì´ë¼ê³  í‘œì‹œë¥¼ í•˜ë©´ ì¸ì‹ì´ ëœë‹¤.



### ë¬¸ì œ 4) ìž…ì–‘ ì‹œê° êµ¬í•˜ê¸° (2)

```MYSQL
SET @hour := -1; -- ë³€ìˆ˜ ì„ ì–¸

SELECT (@hour := @hour + 1) as HOUR,
(SELECT COUNT(*) FROM ANIMAL_OUTS WHERE HOUR(DATETIME) = @hour) as COUNT
FROM ANIMAL_OUTS
WHERE @hour < 23
```

ëª¨ë“  ì‹œê°„ëŒ€ë¥¼ ì¡°íšŒí•´ì•¼í•˜ëŠ” ë¬¸ì œ.

- `SET`ì˜†ì— ë³€ìˆ˜ëª…ê³¼ ì´ˆê¸°ê°’ì„ ì„¤ì •í•  ìˆ˜ ìžˆë‹¤. ë³€ìˆ˜ ì„ ì–¸ ë’¤ ì„¸ë¯¸ì½œë¡  ì£¼ì˜.
- `PL/SQL`ë¬¸ë²•ì—ì„œ `:=`ì€ ë¹„êµì—°ì‚°ìž`=`ê³¼ í˜¼ë™ì„ í”¼í•˜ê¸° ìœ„í•œ í‘œê¸°ì´ë‹¤.





#### ðŸ§¨ì¶œì²˜

- [ìž…ì–‘ ì‹œê° êµ¬í•˜ê¸°(2)](https://chanhuiseok.github.io/posts/db-6/)



##### ë¬¸ì œ 4) ì˜ˆì‹œ

SQLë¬¸ì„ ì‹¤í–‰í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ë‚˜ì™€ì•¼ í•©ë‹ˆë‹¤.

| HOUR | COUNT |
| ---- | ----- |
| 0    | 0     |
| 1    | 0     |
| 2    | 0     |
| 3    | 0     |
| 4    | 0     |
| 5    | 0     |
| 6    | 0     |
| 7    | 3     |
| 8    | 1     |
| 9    | 1     |
| 10   | 2     |
| 11   | 13    |
| 12   | 10    |
| 13   | 14    |
| 14   | 9     |
| 15   | 7     |
| 16   | 10    |
| 17   | 12    |
| 18   | 16    |
| 19   | 2     |
| 20   | 0     |
| 21   | 0     |
| 22   | 0     |
| 23   | 0     |